{"version":3,"file":"static/js/688.f527da53.chunk.js","mappings":"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","sources":["hooks/useEffectUpdate.js","cmps/InputSwitch.jsx","services/cloudinary-service.js","cmps/RecipeImg.jsx","cmps/ShareButton.jsx","cmps/ingPreview.jsx","cmps/IngList.jsx","pages/RecipeEditor.jsx","services/storageService.js","services/recipeService.js","store/actions/dialogMsgActions.js"],"sourcesContent":["import { useEffect, useRef } from \"react\"\n\nexport const useEffectUpdate = (cb, dependencies) => {\n    const isFirstTime = useRef(true)\n\n    useEffect(() => {\n        if (isFirstTime.current) {\n            isFirstTime.current = false\n            return\n        }\n        cb()\n    }, dependencies)\n}","\nexport function InputSwitch({ value, onChange, txt, id }) {\n    return (\n        <div className='input-switch'>\n            <input checked={value} onChange={onChange} type=\"checkbox\" name=\"switch\" id={id} className=\"tgl tgl-light\" />\n            <label htmlFor={id} className=\"tgl-btn\"></label>\n            <h4>{txt}</h4>\n        </div>\n    )\n}\n\n\n\n// h4 iOS\n// input#cb2.tgl.tgl-ios(type = \"checkbox\")\n// label.tgl-btn(for = \"cb2\")\n\n","export async function uploadImg(ev) {\n    const CLOUD_NAME = 'recipe-gen'\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\n\n    const formData = new FormData();\n    formData.append('file', ev.target.files[0])\n    formData.append('upload_preset', 'recipe-gen');\n\n    return fetch(UPLOAD_URL, {\n        method: 'POST',\n        body: formData\n    })\n        .then(res => res.json())\n        .then(res => {\n            return res\n        })\n        .catch(err => console.error(err))\n}\n","import { useRef, useState } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { uploadImg } from '../services/cloudinary-service'\nimport { setDialogOpen } from '../store/actions/dialogMsgActions'\nimport { setLoading } from '../store/actions/loaderActions'\nimport { faCloudUploadAlt, faImage, faTrash } from '@fortawesome/free-solid-svg-icons'\nexport function RecipeImg({ imgUrl, onChangeImg, isEdited }) {\n    const dispatch = useDispatch()\n    const [isExpand, setIsExpand] = useState();\n    const inputRef = useRef()\n\n    const onUploadImg = async (ev) => {\n\n        const _uploadImg = async () => {\n            if (!ev.target.files[0]) return\n            try {\n                dispatch(setLoading(true))\n                const res = await uploadImg(ev)\n\n                onChangeImg(res.url)\n            } catch (err) {\n                console.log(err);\n            } finally {\n\n            }\n        }\n\n        _uploadImg(ev)\n        // if (isEdited) {\n        //     dispatch(setDialogOpen({ txt: 'Are you sure you want to proceed?', title: 'This will save any unsaved changes', successCb: () => _uploadImg(ev) }))\n\n        // } else {\n        //     _uploadImg(ev)\n        // }\n\n\n    }\n\n\n\n    const onTriggerImgUpload = (ev) => {\n        ev.stopPropagation()\n        inputRef.current.click()\n    }\n\n\n    const onRemoveImg = (ev) => {\n        ev.stopPropagation()\n        onChangeImg(null, true)\n        setIsExpand(false)\n    }\n\n\n    const expandClass = isExpand ? 'expand' : ''\n    const imgClass = imgUrl ? 'img-class' : ''\n    // const imgSrc = require('../assets/imgs/cloud-upload.jpeg')\n    return (\n        <section className='recipe-img-container'>\n\n            <section className={`recipe-img ${expandClass} ${imgClass}`}>\n                {imgUrl ?\n                    <section onClick={() => setIsExpand(prevExpand => !prevExpand)} className=\"img-container\" style={{ backgroundImage: `url(${imgUrl})` }} >\n                        <section className={`img-actions ${expandClass}`}>\n                            <button onClick={onTriggerImgUpload}><FontAwesomeIcon icon={faImage} /> <span>Change</span></button>\n                            <button onClick={onRemoveImg}><FontAwesomeIcon icon={faTrash} /> <span>Remove</span></button>\n                        </section>\n                    </section> :\n\n                    <section className=\"img-upload\">\n                        <label htmlFor=\"imgUploader\">\n                            {/* <img className='img-placeholder' src={imgSrc} alt=\"\" /> */}\n                            <FontAwesomeIcon className='upload-icon' icon={faCloudUploadAlt} />\n                        </label>\n                    </section>}\n                <input ref={inputRef} type=\"file\" id=\"imgUploader\" onChange={onUploadImg} hidden />\n            </section>\n        </section>\n    )\n}\n","import {\n    EmailShareButton,\n    FacebookShareButton,\n    RedditShareButton,\n    TelegramShareButton,\n    TwitterShareButton,\n    WhatsappShareButton,\n    WhatsappIcon,\n    FacebookIcon,\n    TelegramIcon,\n    EmailIcon,\n} from \"react-share\";\n\n\nconst DynamicShareBtn = (props) => {\n    switch (props.type) {\n        case 'whatsapp':\n            return <WhatsappShareButton {...props}><WhatsappIcon /></WhatsappShareButton>;\n        case 'facebook':\n            return <FacebookShareButton {...props}><FacebookIcon /></FacebookShareButton>;\n        case 'telegram':\n            return <TelegramShareButton {...props}><TelegramIcon/></TelegramShareButton>;\n        case 'email':\n            return <EmailShareButton {...props}><EmailIcon/></EmailShareButton>;\n        default:\n            return <></>;\n    }\n}\n\nexport function ShareButton(props) {\n    return (\n        <section className='share-btn'>\n            {/* <WhatsappShareButton url=\" \" title=\"My Recipe\"  ><WhatsappIcon /></WhatsappShareButton> */}\n            <DynamicShareBtn {...props} />\n        </section>\n    );\n}\n","import { forwardRef, useEffect, useMemo, useRef, useState } from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\n\nimport { getAmountToScale, selectText, sleep } from \"../services/utilService\";\nimport { showErrorMsg } from \"../services/eventBusService\";\nimport { useCallback } from \"react\";\n\n\nexport const IngPreview = ({\n    ingredient,\n    ingToScale,\n    isFixedRatio,\n    isWeightRatio,\n    onChangeRecipeData,\n    ingredientsLength,\n    handleIngChange,\n    removeIngredient,\n    providedRef,\n    dragHandleProp,\n    dragProp,\n    numOfDishes,\n    handleRecipeAmounts,\n    amountToScaleFixed,\n    isDraggingOver,\n}) => {\n\n    const [className, setClassName] = useState('');\n\n    const moreRef = (el) => {\n\n    }\n    const num = 5\n    const onRemoveIngredient = async (ev) => {\n        ev.stopPropagation()\n        if (isFixedRatio) return\n        if (ingredientsLength === 1) {\n            showErrorMsg({ txt: 'Sorry, for now you need to have at least 1 ingredient' })\n            return\n        }\n\n        setClassName('equal')\n        await sleep(350)\n        removeIngredient(ingredient.id)\n    }\n\n    // const mergeRefs = (...refs) => {\n    //     const filteredRefs = refs.filter(Boolean);\n    //     if (!filteredRefs.length) return null;\n    //     if (filteredRefs.length === 0) return filteredRefs[0];\n    //     return inst => {\n    //         for (const ref of filteredRefs) {\n    //             if (typeof ref === 'function') {\n    //                 ref(inst);\n    //             } else if (ref) {\n    //                 ref.current = inst;\n    //             }\n    //         }\n    //     };\n    // };\n\n\n    const onHandleIngChange = (type) => {\n\n        if (!isFixedRatio) return (ev) => handleIngChange(ev, ingredient)\n        if (type === 'amount') {\n            return (ev) => handleRecipeAmounts(ev, ingredient)\n        }\n\n        return () => { }\n    }\n\n    const onChangeRecipeDataWrap = () => {\n        if (ingredient.units === 'units') {\n            showErrorMsg({ txt: \"Can't set 'Units' as a main relative quantity\" })\n            return\n        }\n        onChangeRecipeData('ingToScaleId', ingredient.id)\n    }\n\n\n    const handleKeyPress = (ev) => {\n\n        // if (ev.which === 13 || ev.charCode === 13 || ev.code==='Enter' || ev.nativeEvent.keyCode===13) {\n        if (ev.nativeEvent?.keyCode === 13 || ev.keyCode === 13 || ev.which === 13 || ev.charCode === 13 || ev.code === 'Enter') {\n            // if (ev.keyCode === 13) {\n            ev.target.blur()\n            window.getSelection().empty()\n            ev.stopPropagation()\n        }\n\n    }\n\n    const onUnSelectText = (ev) => {\n        document.body.focus()\n        selectText(ev, true)\n        // ev.target.focus()\n        document.activeElement.blur();\n\n\n    }\n\n    const onStopPropAndBlur = (ev) => {\n        ev.stopPropagation()\n        document.activeElement.blur();\n        selectText(ev, true)\n    }\n\n    function getUnitsValue() {\n        let unitsValue = isWeightRatio ? 'g' : ingredient.units\n        if (ingredient.units === 'units') unitsValue = 'units'\n        return unitsValue\n    }\n\n\n\n\n\n\n\n    const getOnDoubleTouch = useCallback((cb) => {\n        let gTimeoutId = null\n        return () => {\n            if (!gTimeoutId) {\n                gTimeoutId = setTimeout(() => {\n                    gTimeoutId = null\n                }, 350);\n            } else {\n                clearTimeout(gTimeoutId)\n                gTimeoutId = null\n                cb?.()\n            }\n        }\n    }, [])\n\n\n\n\n    let amountToScale = (ingToScale) ? getAmountToScale(ingredient, ingToScale) : ''\n\n    /*TEST START*/\n\n    const dishesAmount = useMemo(() => {\n        numOfDishes ||= 1\n        if (!isFixedRatio) return (ingredient.amount * numOfDishes) % 1 === 0 ? (ingredient.amount * numOfDishes) : (ingredient.amount * numOfDishes).toFixed(2)\n        if (ingredient.units === 'units') return ingredient.amount\n\n        // linear ratio\n        // const res = amountToScaleFixed / ingToScale.amount * ingredient.amount\n\n        // weight ratio\n        const res = (isWeightRatio ? amountToScaleFixed * amountToScale : amountToScaleFixed / ingToScale.amount * ingredient.amount) * numOfDishes\n\n        // amount To Scale Ratio\n        // const res = ingToScale.amount * amountToScale\n        return res % 1 === 0 ? res : res.toFixed(2)\n    }, [numOfDishes, amountToScaleFixed, amountToScale, isFixedRatio, isWeightRatio])\n\n    /*TEST END*/\n\n\n\n    /*ORIGINAL START*/\n\n    /*\n    const dishesAmount = useMemo(() => {\n        numOfDishes ||= 1\n        if (!isFixedRatio) return (ingredient.amount * numOfDishes) % 1 === 0 ? (ingredient.amount * numOfDishes) : (ingredient.amount * numOfDishes).toFixed(2)\n        // linear ratio\n        const res = amountToScaleFixed / ingToScale.amount * ingredient.amount\n\n        // amount To Scale Ratio\n        // const res = ingToScale.amount * amountToScale\n        return res % 1 === 0 ? res : res.toFixed(2)\n    }, [numOfDishes, amountToScaleFixed])\n    */\n\n    /*ORIGINAL END*/\n    const getIngStyle = () => {\n\n        console.log('isDraggingOver:', isDraggingOver)\n        return {\n            // rotate: isDraggingOver ? '40deg' : '0'\n            // background: isDraggingOver ? \"lightblue\" : \"lightgrey\",\n            // padding: grid,\n\n            // width: 250,\n        }\n    };\n\n    const ingToScaleClass = ingredient.id === ingToScale?.id ? 'chosen' : ''\n\n\n    /*ORIGINAL START*/\n    // const amountToScale = (ingToScale && ingredient.units !== 'units') ? getAmountToScale(ingredient, ingToScale) : '-'\n    /*ORIGINAL END*/\n    var unitsLength = ingredient.units.length + 4\n\n    const isAmountEditable = !isFixedRatio || ingredient.id === ingToScale.id\n    const notAllowedClass = isFixedRatio ? 'not-allowed' : ''\n    // console.log(ingredient.name)\n\n    return (\n\n\n        <article onTouchEnd={getOnDoubleTouch(() => console.log('db Tab!'))} onClick={onUnSelectText} ref={providedRef} {...dragProp} {...dragHandleProp} className={`ing-preview ${className}`} >\n            <span tabIndex=\"-1\" className={`remove-icon ${notAllowedClass}`} ><FontAwesomeIcon onClick={onRemoveIngredient} icon={faTrash} /></span>\n\n\n            <section onClick={onStopPropAndBlur} className=\"editable ing-name\" >\n                <span onClick={ev => ev.stopPropagation()} tabIndex=\"0\" className={notAllowedClass} onKeyPress={handleKeyPress} onFocus={selectText} title={ingredient.name} data-name=\"name\" onBlur={onHandleIngChange()} contentEditable={!isFixedRatio} suppressContentEditableWarning={true}>{ingredient.name}</span>\n            </section>\n            <section autoFocus={true} onClick={onStopPropAndBlur} className=\"amount-unit\">\n                <span onClick={ev => ev.stopPropagation()} tabIndex=\"0\" onKeyPress={handleKeyPress} onFocus={selectText} inputMode=\"numeric\" data-name=\"amount\" onBlur={onHandleIngChange('amount')} className={`editable ${!isAmountEditable && 'not-allowed'}`} contentEditable={isAmountEditable} suppressContentEditableWarning={true}>{dishesAmount}</span>\n                <select onClick={ev => ev.stopPropagation()} disabled={isFixedRatio} className={notAllowedClass} tabIndex=\"0\" style={{ width: `${unitsLength}ch` }} onChange={onHandleIngChange()} value={getUnitsValue()} name=\"units\" id=\"units\">\n                    {/* <select disabled={isFixedRatio} className={notAllowedClass} tabIndex=\"0\"  onChange={onHandleIngChange()} value={ingredient.units} name=\"units\" id=\"units\"> */}\n                    <option value=\"g\">g</option>\n                    <option value=\"Kg\">Kg</option>\n                    <option value=\"mL\">mL</option>\n                    <option value=\"L\">L</option>\n                    <option value=\"oz\">oz</option>\n                    <option value=\"cup\">Cup</option>\n                    <option value=\"tableSpoon\">Table spoon</option>\n                    <option value=\"teaSpoon\">Tea spoon</option>\n                    <option value=\"units\">Units</option>\n                </select>\n            </section>\n            <p title={amountToScale} onClick={onChangeRecipeDataWrap} className={`scale-amount ${ingToScaleClass} ${notAllowedClass}`}>{amountToScale || '-'}</p>\n\n        </article>\n    );\n}","import { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\nimport { useState } from \"react\";\n\nimport { getIdxEquality } from \"../services/utilService\";\nimport { IngPreview } from \"./ingPreview\";\nconst grid = 8;\n\nexport function IngList({\n    ingredients,\n    ingToScale,\n    onChangeRecipeData,\n    handleIngChange,\n    handleEditable,\n    addIngredient,\n    removeIngredient,\n    ingToRemoveIdx,\n    onReOrderIngs,\n    numOfDishes,\n    isFixedRatio,\n    isWeightRatio,\n    handleRecipeAmounts,\n    amountToScaleFixed,\n}) {\n\n    \n\n    const getItemStyle = (isDragging, draggableStyle) => ({\n        // some basic styles to make the items look a bit nicer\n\n        // userSelect: \"none\",\n        // padding: grid * 2,\n        // margin: `0 0 ${grid}px 0`,\n\n        // change background colour if dragging\n        backgroundColor: isDragging ? \"blue\" : \"red\",\n\n        ...draggableStyle\n    });\n\n    const [isDrag, setIsDrag] = useState(false);\n\n\n\n    const getListStyle = isDraggingOver => ({\n        // rotate: isDraggingOver ? '10deg' : '0'\n        // background: isDraggingOver ? \"lightblue\" : \"lightgrey\",\n        // padding: grid,\n\n        // width: 250,\n    });\n\n    const onDragStart = () => {\n        setIsDrag(true)\n\n\n    }\n    const onDragEnd = (res) => {\n        setIsDrag(false)\n        onReOrderIngs(res)\n    }\n\n    // const onDragEnd = (result) => {\n    //     onReOrderIngs(result)\n    // }\n\n    const notAllowedClass = isFixedRatio ? 'not-allowed' : ''\n\n    return (\n        <>\n\n            <DragDropContext onDragStart={onDragStart} onDragEnd={onDragEnd}>\n                <Droppable droppableId=\"droppable\">\n                    {(provided, snapshot) => (\n                        <div\n                            {...provided.droppableProps}\n                            ref={provided.innerRef}\n                        // style={getListStyle(snapshot.isDraggingOver)}\n                        >\n\n                            <section className='ing-list'>\n                                {ingredients.map((ingredient, idx) =>\n                                    // <>\n                                    <Draggable key={ingredient.id} draggableId={ingredient.id} index={idx} >\n                                        {(provided, snapshot) => {\n                                            return (\n                                                <IngPreview\n                                                    providedRef={provided.innerRef}\n                                                    dragProp={provided.draggableProps}\n                                                    dragHandleProp={provided.dragHandleProps}\n                                                    removeIngredient={removeIngredient}\n                                                    handleEditable={handleEditable}\n                                                    handleIngChange={handleIngChange}\n                                                    key={ingredient.id}\n                                                    ingredient={ingredient}\n                                                    ingToScale={ingToScale}\n                                                    isFixedRatio={isFixedRatio}\n                                                    isWeightRatio={isWeightRatio}\n                                                    onChangeRecipeData={onChangeRecipeData}\n                                                    numOfDishes={numOfDishes}\n                                                    isRemovedClass={getIdxEquality(idx, ingToRemoveIdx)}\n                                                    ingredientsLength={ingredients.length}\n                                                    handleRecipeAmounts={handleRecipeAmounts}\n                                                    amountToScaleFixed={amountToScaleFixed}\n                                                    isDraggingOver={snapshot.isDraggingOver}\n                                                    isDragStyle={getItemStyle(snapshot.isDragging, provided.draggableProps.style)}\n                                                />\n                                            )\n                                        }}\n                                    </Draggable>\n                                )}\n                                {(provided.placeholder)}\n                                {<button disabled={isFixedRatio} className={`add-btn ${notAllowedClass}`} onClick={addIngredient} ><FontAwesomeIcon icon={faPlus} /></button>}\n                            </section>\n                        </div>\n\n                    )}\n                </Droppable>\n            </DragDropContext>\n        </>\n    );\n}\n","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { useParams } from \"react-router\";\n\n\nimport { InputSwitch } from \"../cmps/InputSwitch\";\nimport { Loader } from \"../cmps/Loader\";\nimport { RecipeImg } from \"../cmps/RecipeImg\";\nimport { ShareButton } from \"../cmps/ShareButton\";\nimport { useEffectUpdate } from \"../hooks/useEffectUpdate\";\nimport { showErrorMsg, showSuccessMsg } from \"../services/eventBusService\";\nimport { recipeService } from \"../services/recipeService\";\nimport { copyToClipboard, reOrderList, selectText } from \"../services/utilService\";\nimport { setLoading } from \"../store/actions/loaderActions\";\nimport { IngList } from \"../cmps/IngList\";\n// const IngList = lazy(() => import('../cmps/IngList'))\n\n\n\nvar cloneDeep = require('lodash.clonedeep');\n\nexport default function RecipeEditor() {\n    const [recipe, setRecipe] = useState();\n    const [ingToRemoveIdx, setIngToRemoveIdx] = useState(null);\n    const [numOfDishes, setNumOfDishes] = useState('');\n    const [isEdited, setIsEdited] = useState(false);\n    const [isMounted, setIsMounted] = useState(false);\n    const [errMsg, setErrMsg] = useState('');\n\n    const ingToScaleRef = useRef(null)\n    const [isFixedRatio, setIsFixedRatio] = useState(false)\n    const [isWeightRatio, setIsWeightRatio] = useState(false)\n    const [amountToScaleFixed, setAmountToScaleFixed] = useState()\n\n    // const [fixedRatioIngredients, setFixedRatioIngredients] = useState(second)\n\n    const dispatch = useDispatch()\n\n\n    const params = useParams()\n\n\n\n    useEffect(() => {\n        loadRecipe()\n\n    }, [params.id]);\n\n    // TODO continue for fixed scale\n    useEffect(() => {\n        if (!recipe) return\n        const ingToScale = getIngredientToScale(recipe)\n        setAmountToScaleFixed(ingToScale.amount)\n    }, [recipe?.ingToScaleId])\n\n    const loadRecipe = async () => {\n\n        try {\n            const recipe = params.id ? await recipeService.getById(params.id) : recipeService.getEmptyRecipe()\n            // console.log(recipe);\n            setRecipe(recipe)\n\n        } catch (err) {\n            console.log('failing');\n            setErrMsg(\"Sorry,  can't find this recipe at the moment\")\n        } finally {\n\n        }\n    }\n\n\n    useEffectUpdate(() => {\n        if (!isFixedRatio) {\n            const ingToScale = getIngredientToScale(recipe)\n            setAmountToScaleFixed(ingToScale.amount)\n            setIsWeightRatio(false)\n        }\n    }, [isFixedRatio])\n\n    const saveRecipe = async (data, type) => {\n        const { recipe } = data\n        const oldRecipe = cloneDeep(recipe)\n        if (isFixedRatio) return\n        try {\n            setRecipe(recipe)\n            await recipeService.save(data, type)\n            return 'res'\n            // * if field is null thats means were removing an ingredient\n            // setIngToRemoveIdx(null)\n\n        } catch (err) {\n            console.log('cant save recipe: ', err);\n            setRecipe(oldRecipe)\n            throw err\n        } finally {\n            dispatch(setLoading(false))\n\n        }\n    }\n\n\n\n\n\n\n    const getIngredientToScale = useCallback((recipe) => {\n        const ingToScale = recipe.ingredients.find(ing => ing.id === recipe.ingToScaleId)\n        return ingToScale\n    }, [recipe]);\n\n    const onChangeRecipeData = async (field, value) => {\n\n        const recipeToSave = { ...recipe, [field]: value }\n        // if (!isEdited) setIsEdited(true)\n        if (field === 'ingToScaleId' || field === 'imgUrl') {\n            saveRecipe({ recipe: recipeToSave, field, value }, 'updateRecipe')\n        } else {\n            triggerSaveBtn(recipeToSave)\n        }\n\n    }\n\n\n    const handleRecipeAmounts = ({ target }, ingredient) => {\n        let amount = +target.innerText\n        if (!amount) amount = ingToScale.amount\n        setAmountToScaleFixed(amount)\n\n    }\n\n\n\n\n\n    const handleIngChange = async (ev, ingredient) => {\n        const { target } = ev\n        let field, value\n        field = target.name\n        value = target.value\n        if (target.nodeName !== 'SELECT' && target.nodeName !== 'INPUT') {\n            field = target.dataset.name\n            value = target.innerText\n\n            if (field === 'amount') {\n                value = +value\n                if (!value) {\n                    value = ingredient.amount\n                    target.innerText = value\n                    return\n                }\n            }\n        }\n\n        if (value === ingredient[field]) return\n\n        const ingToSave = { ...ingredient, [field]: value }\n        const recipeToSave = {\n            ...recipe,\n            ingredients: recipe.ingredients.map(ing => ing.id === ingredient.id ? ingToSave : ing)\n        }\n\n\n        if (field === 'units' && value === 'units' && recipeToSave.ingToScaleId === ingToSave.id) {\n            return showErrorMsg({ txt: \"Can't change main relative quantity to 'Units'\" })\n        }\n\n        triggerSaveBtn(recipeToSave)\n\n    }\n\n\n    const onSaveRecipe = async () => {\n        try {\n            setIsEdited(false)\n            await saveRecipe({ recipe }, 'general')\n            showSuccessMsg({ txt: 'Recipe saved', time: 2000 })\n        } catch (err) {\n            showErrorMsg({ txt: 'Saving recipe failed', time: 2000 })\n        }\n    }\n\n    const onCancelEdit = () => {\n        setIsEdited(false)\n        loadRecipe()\n        showErrorMsg({ txt: 'Canceled changes', time: 2000 })\n    }\n\n\n    const triggerSaveBtn = (recipeToSave) => {\n        setRecipe(recipeToSave)\n        if (!isEdited) {\n            setIsEdited(true)\n            setIsMounted(true)\n        }\n    }\n\n    const handleNumOfDishesChange = ({ target }) => {\n        let value = +target.value\n\n        if (!value || value < 0) value = ''\n        setNumOfDishes(value)\n\n    }\n\n\n\n\n    const addIngredient = async () => {\n        if (isFixedRatio) return\n        const ingToAdd = recipeService.getEmptyIngredient()\n        ingToAdd.isNew = true\n        const recipeToSave = {\n            ...recipe,\n            ingredients: [...recipe.ingredients, ingToAdd]\n        }\n        triggerSaveBtn(recipeToSave)\n    }\n\n    /**\n     * remove ingredient\n     * \n     * @param {string} ingId \n     */\n    const removeIngredient = async (ingId) => {\n\n\n        const recipeToSave = {\n            ...recipe,\n            ingredients: recipe.ingredients.filter(ing => ing.id !== ingId)\n        }\n        if (recipe.ingToScaleId === ingId) {\n            recipe.ingToScaleId = ''\n        }\n\n        triggerSaveBtn(recipeToSave)\n    }\n\n\n    const onChangeRecipeImg = async (imgUrl, isRemove) => {\n        if (!imgUrl && !isRemove) return\n        await onChangeRecipeData('imgUrl', imgUrl)\n        dispatch(setLoading(false))\n    }\n\n\n\n\n    const onReOrderIngs = (result) => {\n        const { index: destIdx } = result.destination\n        const { index: sourceIdx } = result.source\n        let ingredients = [...recipe.ingredients]\n        ingredients = reOrderList(ingredients, destIdx, sourceIdx)\n        const recipeToSave = {\n            ...recipe,\n            ingredients: ingredients\n        }\n        if (!isEdited) {\n            saveRecipe({ recipe: recipeToSave }, 'general')\n\n        } else {\n            setRecipe(recipeToSave)\n        }\n    }\n\n    const onCopyToClipBoard = () => {\n        const recipeTxt = recipeService.getRecipeTxt(recipe)\n        copyToClipboard(recipeTxt)\n        showSuccessMsg({ txt: 'Copied to clipboard' })\n    }\n\n\n\n    if (!recipe) return <div>{errMsg || <Loader _isLoading={true} />}</div>\n    const ingToScale = getIngredientToScale(recipe)\n\n\n    const floatBtnClass = isEdited ? 'animate-in' : 'animate-out'\n    const recipeTxt = recipeService.getRecipeTxt(recipe)\n    if (!amountToScaleFixed) return <Loader _isLoading={true} />\n\n    return (\n        <div className='recipe-editor'>\n            <div className=\"focus-div\"></div>\n            <section className=\"title-container\">\n                <h2 onFocus={selectText} onBlur={({ target }) => onChangeRecipeData('name', target.innerText)} contentEditable suppressContentEditableWarning={true} >{recipe.name}</h2>\n                <button className=\"btn copy\" onClick={onCopyToClipBoard}>Copy To Clipboard</button>\n            </section>\n            <RecipeImg imgUrl={recipe.imgUrl} isEdited={isEdited} onChangeImg={onChangeRecipeImg} />\n            <section className=\"share-btns\">\n                <ShareButton url=\" \" type=\"whatsapp\" title={recipeTxt} />\n                <ShareButton url=\"facebook.com\" type=\"facebook\" quote={recipeTxt} />\n                <ShareButton url=\"telegram.com\" type=\"telegram\" title={recipeTxt} />\n                <ShareButton url=\"\" type=\"email\" subject={recipe.name} body={recipeTxt} />\n            </section>\n            <section className=\"title-edit\">\n                {/* <section className=\"inner-edit\"> */}\n                {/* <strong className=\"ingredients\">Ingredients</strong> */}\n                <section className=\"input-check-container\">\n                    <InputSwitch id=\"fixedMode\" txt=\"Fixed Mode\" value={isFixedRatio} onChange={() => setIsFixedRatio(prevIsFixed => !prevIsFixed)} />\n                    {isFixedRatio && <InputSwitch id=\"weightMode\" txt=\"Weight Ratio\" value={isWeightRatio} onChange={() => setIsWeightRatio(prevIsWeightRatio => !prevIsWeightRatio)} />}\n                </section>\n                {/* </section> */}\n                <form onSubmit={ev => ev.preventDefault()} className=\"nice-form\">\n                    <div className=\"form__group field dishes-form\">\n                        <input value={numOfDishes} onChange={handleNumOfDishesChange} type=\"number\" id=\"numOfDishes\" name=\"numOfDishes\" className=\"form__field\" placeholder=\"Search by recipe or ingredient\" />\n                        <label htmlFor=\"numOfDishes\" className=\"form__label\">Number Of Dishes</label>\n                    </div>\n                </form>\n            </section>\n            <IngList\n                removeIngredient={removeIngredient}\n                addIngredient={addIngredient}\n                handleIngChange={handleIngChange}\n                ingredients={recipe.ingredients}\n                ingToScale={ingToScale}\n                onChangeRecipeData={onChangeRecipeData}\n                ingToRemoveIdx={ingToRemoveIdx}\n                onReOrderIngs={onReOrderIngs}\n                numOfDishes={numOfDishes}\n                isFixedRatio={isFixedRatio}\n                isWeightRatio={isWeightRatio}\n                handleRecipeAmounts={handleRecipeAmounts}\n                amountToScaleFixed={amountToScaleFixed}\n            />\n\n\n            {/* <section className=\"gap\"></section> */}\n            <section className=\"instructions\">\n\n                <strong className=\"instructions-title\">Instructions</strong>\n                <textarea onClick={(ev) => ev.stopPropagation()} className=\"instructions-area\" onChange={(({ target }) => onChangeRecipeData('instructions', target.value))} value={recipe.instructions} name=\"instructions\" id=\"\" cols=\"30\" rows=\"30\"></textarea>\n            </section>\n\n\n            {/* {isMounted && <button onClick={()=>setIsEdited(false)} className={`edit-btn cancel-changes ${floatBtnClass}`}>Cancel</button>} */}\n            {isMounted &&\n                <section className={`edit-btn-container  ${floatBtnClass}`}>\n                    <button onClick={onSaveRecipe} className={`edit-btn save save-changes`}>Save Changes</button>\n                    <button onClick={onCancelEdit} className={`edit-btn cancel save-changes`}>Cancel</button>\n                </section>\n            }\n\n        </div>\n    );\n}\n","\r\nfunction store(key, value) {\r\n    localStorage[key] = JSON.stringify(value);\r\n}\r\n\r\nfunction load(key, defaultValue = null) {\r\n    var value = localStorage[key] || defaultValue;\r\n    return JSON.parse(value);\r\n}\r\nexport const storageService = {\r\n    store,\r\n    load\r\n}\r\n","import { capitalize } from 'lodash'\r\nimport { httpService } from './httpService.js'\r\nimport { storageService } from './storageService.js'\r\nimport { capitalizeSentence, copyToClipboard, getAmountToScale, makeId } from './utilService.js'\r\n\r\nexport const recipeService = {\r\n    query,\r\n    getEmptyRecipe,\r\n    getEmptyIngredient,\r\n    getById,\r\n    remove,\r\n    update,\r\n    save,\r\n    getRecipeTxt\r\n}\r\n\r\nconst STORAGE_KEY = 'recipes'\r\nconst BASE_URL = 'recipe'\r\n\r\n\r\nasync function query(userId, filterBy) {\r\n    try {\r\n        return httpService.get(BASE_URL, { userId, filterBy })\r\n    } catch (err) {\r\n        return \r\n    }\r\n}\r\n\r\n\r\n\r\nasync function getById(id) {\r\n    try {\r\n        const res = await httpService.get(BASE_URL + '/' + id)\r\n        // if (res)\r\n        return res\r\n    } catch (err) {\r\n        throw err\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nasync function remove(recipeId) {\r\n    try {\r\n        return httpService.delete(`${BASE_URL}/${recipeId}`)\r\n    } catch (err) {\r\n        return\r\n    }\r\n}\r\n\r\n\r\n/*TEST START*/\r\nasync function save(data, type) {\r\n    try {\r\n        return data?.recipe._id ? httpService.put(BASE_URL, { data, type }) : httpService.post(BASE_URL, data.recipe)\r\n    } catch (err) {\r\n        return\r\n    }\r\n}\r\n/*TEST END*/\r\n\r\n\r\n\r\n/*ORIGINAL START*/\r\n// async function save(recipe, field, value, ingId) {\r\n//     try {\r\n//         return recipe._id ? httpService.put(BASE_URL, { recipe, field, value, ingId }) : httpService.post(BASE_URL, recipe)\r\n//     } catch (err) {\r\n//         return\r\n//     }\r\n// }\r\n/*ORIGINAL END*/\r\n\r\n\r\n\r\n\r\nasync function update(recipe) {\r\n    try {\r\n        return httpService.put(BASE_URL, recipe)\r\n    } catch (err) {\r\n        return\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction getEmptyRecipe() {\r\n    const firstIng = getEmptyIngredient()\r\n    return {\r\n        name: 'New Recipe',\r\n        createdAt: Date.now(),\r\n        ingToScaleId: firstIng.id,\r\n        ingredients: [firstIng],\r\n        imgUrl: '',\r\n        instructions: ''\r\n    }\r\n}\r\n\r\nfunction getEmptyIngredient() {\r\n    return {\r\n        id: makeId(),\r\n        name: 'ingredient',\r\n        amount: 1,\r\n        units: 'g'\r\n    }\r\n}\r\n\r\n\r\nfunction getRecipeTxt(recipe) {\r\n    let recipeTxt = ''\r\n    recipeTxt += capitalizeSentence(recipe.name) + '\\n\\n\\n'\r\n    const relativeIng = recipe.ingredients.find(ing => ing.id === recipe.ingToScaleId)\r\n    recipeTxt += '--Ingredients--\\n'\r\n    for (const ingredient of recipe.ingredients) {\r\n\r\n        const relativeAmount = relativeIng && getAmountToScale(ingredient, relativeIng)\r\n        recipeTxt += '* '\r\n        recipeTxt += capitalize(ingredient.name) + '\\t|\\t'\r\n        recipeTxt += ingredient.amount + ' ' + getFormattedIngUnit(ingredient.units) + '\\t'\r\n        // recipeTxt += relativeAmount ? '|\\t' + relativeAmount : ''\r\n        recipeTxt += '\\n\\n'\r\n    }\r\n    recipeTxt += '\\n\\n'\r\n    recipeTxt += '--Instructions--\\n'\r\n    recipeTxt += recipe.instructions\r\n\r\n\r\n    return recipeTxt\r\n\r\n}\r\n\r\nfunction getFormattedIngUnit(str) {\r\n    if (str.length <= 2) return str\r\n    return capitalize(separateKebabCase(str))\r\n}\r\n\r\nconst separateKebabCase = str => {\r\n\r\n    return str && str\r\n        .match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g)\r\n        .map(x => x.toLowerCase())\r\n        .join(' ');\r\n\r\n}\r\n\r\n","\nexport function setDialogOpen({ txt, title, successCb = () => { }, failCb = () => { } }) {\n  return async (dispatch) => {\n    try {\n      return dispatch({ type: 'SET_DIALOG_OPEN', txt, title, successCb, failCb })\n    } catch (err) {\n      console.log('err:', err);\n      throw err\n    }\n  }\n}\n\nexport function setDialogClose(txt, title) {\n  return async (dispatch) => {\n    try {\n      return dispatch({ type: 'SET_DIALOG_CLOSE' })\n    } catch (err) {\n      console.log('err:', err);\n      throw err\n    }\n  }\n}\n\n"],"names":["useEffectUpdate","cb","dependencies","isFirstTime","useRef","useEffect","current","InputSwitch","value","onChange","txt","id","className","checked","type","name","htmlFor","uploadImg","ev","UPLOAD_URL","formData","FormData","append","target","files","fetch","method","body","then","res","json","catch","err","console","error","RecipeImg","imgUrl","onChangeImg","dispatch","isEdited","useDispatch","useState","isExpand","setIsExpand","inputRef","onUploadImg","_uploadImg","setLoading","url","log","expandClass","imgClass","onClick","prevExpand","style","backgroundImage","stopPropagation","click","icon","faImage","faTrash","faCloudUploadAlt","ref","hidden","DynamicShareBtn","props","WhatsappShareButton","WhatsappIcon","FacebookShareButton","FacebookIcon","TelegramShareButton","TelegramIcon","EmailShareButton","EmailIcon","ShareButton","IngPreview","ingredient","ingToScale","isFixedRatio","isWeightRatio","onChangeRecipeData","ingredientsLength","handleIngChange","removeIngredient","providedRef","dragHandleProp","dragProp","numOfDishes","handleRecipeAmounts","amountToScaleFixed","isDraggingOver","setClassName","onRemoveIngredient","showErrorMsg","sleep","onHandleIngChange","handleKeyPress","nativeEvent","keyCode","which","charCode","code","blur","window","getSelection","empty","onStopPropAndBlur","document","activeElement","selectText","getOnDoubleTouch","useCallback","gTimeoutId","clearTimeout","setTimeout","amountToScale","getAmountToScale","dishesAmount","useMemo","amount","toFixed","units","ingToScaleClass","unitsLength","length","isAmountEditable","notAllowedClass","onTouchEnd","focus","tabIndex","onKeyPress","onFocus","title","onBlur","contentEditable","suppressContentEditableWarning","autoFocus","inputMode","disabled","width","unitsValue","getUnitsValue","IngList","ingredients","handleEditable","addIngredient","ingToRemoveIdx","onReOrderIngs","setIsDrag","onDragStart","onDragEnd","droppableId","provided","snapshot","droppableProps","innerRef","map","idx","draggableId","index","draggableProps","dragHandleProps","isRemovedClass","getIdxEquality","isDragStyle","isDragging","draggableStyle","backgroundColor","placeholder","faPlus","cloneDeep","require","RecipeEditor","recipe","setRecipe","setNumOfDishes","setIsEdited","isMounted","setIsMounted","errMsg","setErrMsg","setIsFixedRatio","setIsWeightRatio","setAmountToScaleFixed","params","useParams","loadRecipe","getIngredientToScale","ingToScaleId","recipeService","saveRecipe","data","oldRecipe","find","ing","field","recipeToSave","triggerSaveBtn","nodeName","dataset","innerText","ingToSave","onSaveRecipe","showSuccessMsg","time","ingToAdd","isNew","ingId","filter","onChangeRecipeImg","isRemove","Loader","_isLoading","floatBtnClass","recipeTxt","copyToClipboard","quote","subject","prevIsFixed","prevIsWeightRatio","onSubmit","preventDefault","result","destIdx","destination","sourceIdx","source","reOrderList","instructions","cols","rows","query","getEmptyRecipe","firstIng","getEmptyIngredient","createdAt","Date","now","getById","remove","update","save","getRecipeTxt","capitalizeSentence","relativeIng","capitalize","getFormattedIngUnit","BASE_URL","userId","filterBy","httpService","recipeId","_id","makeId","str","separateKebabCase","match","x","toLowerCase","join","setDialogOpen","successCb","failCb"],"sourceRoot":""}