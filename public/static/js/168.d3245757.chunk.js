"use strict";(self.webpackChunkrecipe_gen=self.webpackChunkrecipe_gen||[]).push([[168],{5168:function(e,n,t){t.r(n),t.d(n,{default:function(){return x}});var a=t(885),i=t(1413),o=t(3174),r=t(4483),s=t(9738),d=t(2791),c=t(9275),l=t(5861),u=t(7757),p=t.n(u),g=t(1731),h=t(184);function m(e){var n=e.ingredient,t=e.ingToScale,s=e.isFixedRatio,u=e.onChangeRecipeData,m=e.ingredientsLength,x=e.handleIngChange,f=e.removeIngredient,v=e.providedRef,b=e.dragHandleProp,j=e.dragProp,C=e.numOfDishes,I=e.handleRecipeAmounts,R=e.amountToScaleFixed,S=(0,d.useState)(""),k=(0,a.Z)(S,2),w=k[0],y=k[1],F=function(){var e=(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:if(1!==m){e.next=5;break}return(0,g.oc)({txt:"Sorry, for now you need to have at least 1 ingredient"}),e.abrupt("return");case 5:return y("equal"),e.next=8,(0,c._v)(350);case 8:f(n.id);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(e){return s?"amount"===e?function(e){return I(e,n)}:function(){}:function(e){return x(e,n)}},P=function(e){var n;13!==(null===(n=e.nativeEvent)||void 0===n?void 0:n.keyCode)&&13!==e.keyCode&&13!==e.which&&13!==e.charCode&&"Enter"!==e.code||(e.target.blur(),window.getSelection().empty(),e.stopPropagation())},T=(0,d.useMemo)((function(){if(C||(C=1),!s)return n.amount*C%1===0?n.amount*C:(n.amount*C).toFixed(2);var e=R/t.amount*n.amount;return e%1===0?e:e.toFixed(2)}),[C,R]),D=n.id===(null===t||void 0===t?void 0:t.id)?"chosen":"",E=t?(0,c.ze)(n,t):"",Z=n.units.length+3,O=!s||n.id===t.id,L=s?"not-allowed":"";return(0,h.jsxs)("article",(0,i.Z)((0,i.Z)((0,i.Z)({ref:v},j),b),{},{className:"ing-preview ".concat(w),children:[(0,h.jsx)("span",{tabIndex:"-1",className:"remove-icon ".concat(L),children:(0,h.jsx)(r.G,{onClick:F,icon:o.$aW})}),(0,h.jsx)("section",{className:"editable ing-name",children:(0,h.jsx)("span",{tabIndex:"0",className:L,onKeyPress:P,onFocus:c.eO,title:n.name,"data-name":"name",onBlur:N(),contentEditable:!s,suppressContentEditableWarning:!0,children:n.name})}),(0,h.jsxs)("section",{className:"amount-unit",children:[(0,h.jsx)("span",{tabIndex:"0",onKeyPress:P,onFocus:c.eO,inputMode:"numeric","data-name":"amount",onBlur:N("amount"),className:"editable ".concat(!O&&"not-allowed"),contentEditable:O,suppressContentEditableWarning:!0,children:T}),(0,h.jsxs)("select",{disabled:s,className:L,tabIndex:"0",style:{width:"".concat(Z,"ch")},onChange:N(),value:n.units,name:"units",id:"units",children:[(0,h.jsx)("option",{value:"g",children:"g"}),(0,h.jsx)("option",{value:"Kg",children:"Kg"}),(0,h.jsx)("option",{value:"mL",children:"mL"}),(0,h.jsx)("option",{value:"L",children:"L"}),(0,h.jsx)("option",{value:"oz",children:"oz"}),(0,h.jsx)("option",{value:"cup",children:"Cup"}),(0,h.jsx)("option",{value:"tableSpoon",children:"Table spoon"}),(0,h.jsx)("option",{value:"teaSpoon",children:"Tea spoon"}),(0,h.jsx)("option",{value:"units",children:"Units"})]})]}),(0,h.jsx)("p",{title:E,onClick:function(){"units"!==n.units?u("ingToScaleId",n.id):(0,g.oc)({txt:"Can't set 'Units' as a main relative quantity"})},className:"".concat(D," ").concat(L),children:E||"-"})]}))}function x(e){var n=e.ingredients,t=e.ingToScale,l=e.onChangeRecipeData,u=e.handleIngChange,p=e.handleEditable,g=e.addIngredient,x=e.removeIngredient,f=e.ingToRemoveIdx,v=e.onReOrderIngs,b=e.numOfDishes,j=e.isFixedRatio,C=e.handleRecipeAmounts,I=e.amountToScaleFixed,R=(0,d.useState)(!1),S=(0,a.Z)(R,2),k=(S[0],S[1]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(s.Z5,{onDragStart:function(){k(!0)},onDragEnd:function(e){k(!1),v(e)},children:(0,h.jsx)(s.bK,{droppableId:"droppable",children:function(e,a){return(0,h.jsx)("div",(0,i.Z)((0,i.Z)({},e.droppableProps),{},{ref:e.innerRef,style:(a.isDraggingOver,{}),children:(0,h.jsxs)("section",{className:"ing-list",children:[n.map((function(e,a){return(0,h.jsx)(s._l,{draggableId:e.id,index:a,children:function(i){return(0,h.jsx)(m,{providedRef:i.innerRef,dragProp:i.draggableProps,dragHandleProp:i.dragHandleProps,removeIngredient:x,handleEditable:p,handleIngChange:u,ingredient:e,ingToScale:t,isFixedRatio:j,onChangeRecipeData:l,numOfDishes:b,isRemovedClass:(0,c.Gm)(a,f),ingredientsLength:n.length,handleRecipeAmounts:C,amountToScaleFixed:I},e.id)}},e.id)})),e.placeholder,(0,h.jsx)("button",{className:"add-btn",onClick:g,children:(0,h.jsx)(r.G,{icon:o.r8p})})]})}))}})})})}}}]);
//# sourceMappingURL=168.d3245757.chunk.js.map